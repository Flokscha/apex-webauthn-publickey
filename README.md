# APEX Webauthn public-key-method
Oracle Apex Plugin for Browser Webauthentication Public-Key API.
After a successfull regular Login the User can register the Device. If the Device is supported the Credentials will be saved.
Whenever the User comes back to the Application and has a "Remember-Me"-Cookie active, then he can just Re-Authenticate with 1-click and a User Verification of the used Authenticator.

---------------------------------------------------------------
The Plugin comes in 3 Seperate Plugins.
1. Login Region
2. Login Process
3. Register Processs

#### Login Region
The Login Region Identifies the User by some method (Currently the Remember-Username-Cookie).
It is a close copy of the Static Region, but loads all neccessary scripts.

<img width="440" alt="image" src="https://user-images.githubusercontent.com/26186939/154468717-1afa2213-38a9-45a9-a452-264642eb8854.png">

#### Login Process
The Login Process verifies the authentication against registered and stored Credentials.

#### Register Dynamic Action
The DA handles the Registration of the Device. It Stores the Credentials inside a Table "webauthentication"

```
create table webauthentication (
    id                             number generated by default on null as identity 
                                   constraint webauthentication_id_pk primary key,
    username                       varchar2(255 char),
    userid                         varchar2(4000 char),
    responsejson                   clob check (responsejson is json)
);
```

### Webauthn Information
[Guide to Web Authentication](https://webauthn.guide/)
[Mozilla Attestation and Assertion](https://developer.mozilla.org/en-US/docs/Web/API/Web_Authentication_API/Attestation_and_Assertion)

### DEMO Application
[On Apex.oracle.com](https://apex.oracle.com/pls/apex/f?p=91879:home)
using test/Test1234
Or Download it and install it yourself. The Application is in the Repository.

### What can the Plugin do?
- It enables passwordless authentication using a secure Browser-API
- as the remember-username-cookie is APEX Instance wide accessible, it functions as a 1-click SSO.
- Currently only works with APEX Users
- Supports Windows Hello. Authenticate using the Windows PIN, Windows Password or Biometric Sensors.
- Tested with Android Dashlane, but i guess iPhone Dashlane should do the same.
- Currently implemented [COSE Algorithms](https://www.iana.org/assignments/cose/cose.xhtml) using Java
  - -257  RSASSA-PKCS1-v1_5 using SHA-256
  - -7    ECDSA w/ SHA-256

### Todos of the Plugin
Feel free to fork the project and contribute to it ðŸ˜Š
- Support with generic Authentication Schemes
- Translation
- More Support for different Algorithms: It can be Extended, but the Oracle Database with Java 1.8 has very limited Support for most Cryptocraphic Keys
- Different Methods to store last active User
- Make User Verification choosable 
